const playRythm = (now) => {
  // kick.triggerAttackRelease("C4", "8n", now + 16);
  let loopFire1 = 0;
  let loopShield = 0;

  console.log(Tone.Transport.bpm.value);

  Tone.Transport.scheduleRepeat(
    (now) => {
      kickTrigger = true;
      bossFire = false;
      // setTimeout(() => {
      //   if (activeShield) {
      //     shieldAnimation();
      //   }
      // }, 450);
      loopFire1++;
    },
    "2n",
    "8m"
  );

  Tone.Transport.scheduleRepeat(
    (now) => {
      if (activeShield) {
        shieldAnimation();
      }
      loopShield++;
    },
    "2n",
    "8.5m"
  );

  const seqKick = new Tone.Sequence(
    (time, note) => {
      // kick.connect(kickGain);
      kick.triggerAttackRelease(note, 0.05, time);
      // subdivisions are given as subarrays
    },
    [
      //-------------------------------------------

      //--------------------------------------------

      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      [],
      //------
      ["C4"],
      [],
      [],
      ["C4"],
      //-------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],

      //----------------------------------
      //-------------------------------------------
      //-----------------PART 2 --------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //---------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [[], ["C4"]],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //-------------------------------------Part3
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],

      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //------------------------------------------------
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      ["C4"],
      [],
      [],
    ]
  );

  seqKick.loop = false;
  seqKick.start(0);

  const seqSnare = new Tone.Sequence(
    (time, note) => {
      snare.connect(snareGain);
      snare.triggerAttackRelease(note, 0.05, time);
      // subdivisions are given as subarrays
    },
    [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      //-------------------------------------------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //-------------------------------------------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //-------------------------------------------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],
      //-------------------------------------------
      [],
      [],
      ["C4"],
      [],
      //------
      [],
      [],
      ["C4"],
      [],

      //--------pause explosion
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],

      //------------part 2---------------------------------------
      //--------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //--------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //--------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //----------------------------------------------------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //--------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //----------------------------------------------------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //--------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      //----------------------------------------------------------------------------------------
      [],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      [],
      //--------------------------------------------------------------------------
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],

      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      [],
      [],
      ["C4"],
      [],
      // boss spawn
    ]
  );

  seqSnare.loop = false;
  seqSnare.start(0);
};
